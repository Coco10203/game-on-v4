function go_update_bonus_loot(){jQuery("#go_bonus_loot").html('<span class="go_loading"></span>');var e=GO_EVERY_PAGE_DATA.nonces.go_update_bonus_loot,r=go_task_data.ID;jQuery.ajax({type:"post",url:MyAjax.ajaxurl,data:{_ajax_nonce:e,action:"go_update_bonus_loot",post_id:r},success:function(e){console.log("Bonus Loot"),jQuery("#go_bonus_loot").remove(),jQuery("#page-container").append(e)}})}function getTimeRemaining(e){var r=Date.parse(e)-Date.parse(new Date),o=Math.floor(r/1e3%60),t=Math.floor(r/1e3/60%60),s=Math.floor(r/36e5%24);return{total:r,days:Math.floor(r/864e5),hours:s,minutes:t,seconds:o}}function initializeClock(e,r){function o(){var e=getTimeRemaining(r);if(e.days=Math.max(0,e.days),s.innerHTML=e.days,e.hours=Math.max(0,e.hours),a.innerHTML=("0"+e.hours).slice(-2),e.minutes=Math.max(0,e.minutes),_.innerHTML=("0"+e.minutes).slice(-2),e.seconds=Math.max(0,e.seconds),n.innerHTML=("0"+e.seconds).slice(-2),e.total=0){clearInterval(g);new Audio(PluginDir.url+"media/airhorn.mp3").play()}}var t=document.getElementById(e),s=t.querySelector(".days"),a=t.querySelector(".hours"),_=t.querySelector(".minutes"),n=t.querySelector(".seconds");o();var i=getTimeRemaining(r),u=i.total;if(console.log(i.total),u>0)var g=setInterval(o,1e3)}function go_timer_abandon(){var e=go_task_data.redirectURL;window.location=e}function flash_error_msg(e){var r=jQuery(e).css("background-color");void 0===typeof r&&(r="white"),jQuery(e).animate({color:r},200,function(){jQuery(e).animate({color:"red"},200)})}function go_enable_loading(e){e.innerHTML='<span class="go_loading"></span>'+e.innerHTML}function go_disable_loading(){console.log("oneclick"),jQuery(".go_loading").remove(),jQuery("#go_button").off().one("click",function(e){task_stage_check_input(this)}),jQuery("#go_back_button").off().one("click",function(e){task_stage_check_input(this)}),jQuery("#go_bonus_button").off().one("click",function(e){go_update_bonus_loot(this)}),jQuery(".progress").closest(".go_checks_and_buttons").addClass("active")}function task_stage_check_input(e){console.log("button clicked"),go_enable_loading(e);var r="";void 0!==jQuery(e).attr("button_type")&&(r=jQuery(e).attr("button_type"));var o="";void 0!==jQuery(e).attr("status")&&(o=jQuery(e).attr("status"));var t="";if(void 0!==jQuery(e).attr("check_type")&&(t=jQuery(e).attr("check_type")),"continue"==r||"complete"==r||"continue_bonus"==r||"complete_bonus"==r)if("password"===t||"unlock"==t){var s=jQuery("#go_result").attr("value").length>0;if(!s){jQuery("#go_stage_error_msg").show();var a="Retrieve the password from "+go_task_data.admin_name+".";return jQuery("#go_stage_error_msg").text()!=a?jQuery("#go_stage_error_msg").text(a):flash_error_msg("#go_stage_error_msg"),void go_disable_loading()}}else if("URL"==t){var _=jQuery("#go_result").attr("value").replace(/\s+/,"");if(!(_.length>0)){jQuery("#go_stage_error_msg").show();var a="Enter a valid URL.";return jQuery("#go_stage_error_msg").text()!=a?jQuery("#go_stage_error_msg").text(a):flash_error_msg("#go_stage_error_msg"),void go_disable_loading()}if(!_.match(/^(http:\/\/|https:\/\/).*\..*$/)||_.lastIndexOf("http://")>0||_.lastIndexOf("https://")>0){jQuery("#go_stage_error_msg").show();var a="Enter a valid URL.";return jQuery("#go_stage_error_msg").text()!=a?jQuery("#go_stage_error_msg").text(a):flash_error_msg("#go_stage_error_msg"),void go_disable_loading()}var n=!0}else if("upload"==t){var i=jQuery("#go_result").attr("value");if(void 0==i){jQuery("#go_stage_error_msg").show();var a="Please attach a file.";return jQuery("#go_stage_error_msg").text()!=a?jQuery("#go_stage_error_msg").text(a):flash_error_msg("#go_stage_error_msg"),void go_disable_loading()}}else if("quiz"==t){var u=jQuery(".go_test_list");if(u.length>=1){for(var g=0,l=0;l<u.length;l++){var c="#"+u[l].id+" input:checked",d=jQuery(c);d.length>=1&&g++}return g>=u.length?(go_quiz_check_answers(o,e),void go_disable_loading()):u.length>1?(jQuery("#go_stage_error_msg").show(),"Please answer all questions!"!=jQuery("#go_stage_error_msg").text()?jQuery("#go_stage_error_msg").text("Please answer all questions!"):flash_error_msg("#go_stage_error_msg"),void go_disable_loading()):(jQuery("#go_stage_error_msg").show(),"Please answer the question!"!=jQuery("#go_stage_error_msg").text()?jQuery("#go_stage_error_msg").text("Please answer the question!"):flash_error_msg("#go_stage_error_msg"),void go_disable_loading())}}task_stage_change(e)}function task_stage_change(e){console.log("change");var r="";void 0!==jQuery(e).attr("button_type")&&(r=jQuery(e).attr("button_type"));var o="";void 0!==jQuery(e).attr("status")&&(o=jQuery(e).attr("status"));var t="";void 0!==jQuery(e).attr("check_type")&&(t=jQuery(e).attr("check_type"));var s=jQuery("#go_admin_bar_progress_bar").css("background-color"),a=jQuery("#go_result").attr("value");jQuery.ajax({type:"POST",data:{_ajax_nonce:go_task_data.go_task_change_stage,action:"go_task_change_stage",post_id:go_task_data.ID,user_id:go_task_data.userID,status:o,button_type:r,check_type:t,result:a},success:function(e){console.log("success");var r={};try{var r=JSON.parse(e)}catch(e){r={json_status:"101",timer_start:"",button_type:"",time_left:"",html:"",redirect:"",rewards:{gold:0}}}if("101"===Number.parseInt(r.json_status)){console.log(101),jQuery("#go_stage_error_msg").show();var o="Server Error.";jQuery("#go_stage_error_msg").text()!=o?jQuery("#go_stage_error_msg").text(o):flash_error_msg("#go_stage_error_msg")}else if(302===Number.parseInt(r.json_status))console.log(302),window.location=r.location;else if("refresh"==r.json_status)location.reload();else if("bad_password"==r.json_status){jQuery("#go_stage_error_msg").show();var o="Invalid password.";jQuery("#go_stage_error_msg").text()!=o?jQuery("#go_stage_error_msg").text(o):flash_error_msg("#go_stage_error_msg")}else{if("undo"==r.button_type)jQuery("#go_wrapper div").last().hide(),jQuery("#go_wrapper > div").slice(-3).hide("slow",function(){jQuery(this).remove()});else if("undo_last"==r.button_type)jQuery("#go_wrapper div").last().hide(),jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()});else if("continue"==r.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("complete"==r.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("show_bonus"==r.button_type)jQuery("#go_buttons").remove(),jQuery(".go_checks_and_buttons").removeClass("active");else if("continue_bonus"==r.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("complete_bonus"==r.button_type)jQuery("#go_wrapper > div").slice(-1).hide("slow",function(){jQuery(this).remove()});else if("undo_bonus"==r.button_type)jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()});else if("abandon_bonus"==r.button_type)jQuery("#go_wrapper > div").slice(-3).remove();else if("abandon"==r.button_type)window.location=r.redirect;else if("timer"==r.button_type){jQuery("#go_wrapper > div").slice(-2).hide("slow",function(){jQuery(this).remove()});var t=new Audio(PluginDir.url+"media/airhorn.mp3");t.play()}go_append(r),jQuery("#notification").html(r.notification),jQuery("#go_admin_bar_progress_bar").css({"background-color":s}),jQuery("#go_button").ready(function(){})}}})}function go_append(e){jQuery(e.html).appendTo("#go_wrapper").stop().hide().show("slow").promise().then(function(){Vids_Fit_and_Box(),go_make_clickable(),go_disable_loading()})}function go_make_clickable(){jQuery(".clickable").keyup(function(e){13===e.which&&jQuery("#go_button").click()})}function go_update_admin_view(e){jQuery.ajax({type:"POST",url:MyAjax.ajaxurl,data:{_ajax_nonce:GO_EVERY_PAGE_DATA.nonces.go_update_admin_view,action:"go_update_admin_view",go_admin_view:e},success:function(e){location.reload()},error:function(e){console.log(e),console.log("fail")}})}function go_quiz_check_answers(e,r){var o=jQuery(".go_test_list"),t=o.length;if(jQuery(".go_test_list :checked").length>=t){var s=[];if(jQuery(".go_test_list").length>1){for(var a=[],_=0;_<t;_++){var n=o[_].children[1].children[0].type;s.push(n);var i="#"+o[_].id+" :checked",u=jQuery(i);if("radio"==n)void 0!=u[0]&&a.push(u[0].value);else if("checkbox"==n){for(var g=[],l=0;l<u.length;l++)g.push(u[l].value);var c=g.join("### ");a.push(c)}}var d=a.join("#### "),y=s.join("### ")}else{var h=jQuery(".go_test_list li input:checked"),y=jQuery(".go_test_list li input").first().attr("type");if("radio"==y)var d=h[0].value;else if("checkbox"==y){for(var d=[],l=0;l<h.length;l++)d.push(h[l].value);d=d.join("### ")}}}jQuery.ajax({type:"POST",data:{_ajax_nonce:go_task_data.go_unlock_stage,action:"go_unlock_stage",task_id:go_task_data.ID,user_id:go_task_data.userID,list_size:t,chosen_answer:d,type:y,status:e},success:function(e){if("refresh"==e)location.reload();else{if(1==e)return jQuery(".go_test_container").hide("slow"),jQuery("#test_failure_msg").hide("slow"),jQuery(".go_test_submit_div").hide("slow"),jQuery(".go_wrong_answer_marker").hide(),jQuery("#go_stage_error_msg").hide(),task_stage_change(r),0;if(0==e)return jQuery("#go_stage_error_msg").show(),jQuery("#go_stage_error_msg").text("Wrong answer, try again!"),1;if("string"==typeof e&&t>1){for(var s=e.split(", "),a=0;a<o.length;a++){var _="#"+o[a].id;-1===jQuery.inArray(_,s)?(jQuery(_+" .go_wrong_answer_marker").is(":visible")&&jQuery(_+" .go_wrong_answer_marker").hide(),jQuery(_+" .go_correct_answer_marker").is(":visible")||jQuery(_+" .go_correct_answer_marker").show()):(jQuery(_+" .go_correct_answer_marker").is(":visible")&&jQuery(_+" .go_correct_answer_marker").hide(),jQuery(_+" .go_wrong_answer_marker").is(":visible")||jQuery(_+" .go_wrong_answer_marker").show())}return void("Wrong answer, try again!"!=jQuery("#go_stage_error_msg").text()?(jQuery("#go_stage_error_msg").show(),jQuery("#go_stage_error_msg").text("Wrong answer, try again!")):flash_error_msg("#go_stage_error_msg"))}}}})}jQuery(document).ready(function(){jQuery.ajaxSetup({url:go_task_data.url+="/wp-admin/admin-ajax.php"});var e=go_task_data.status,r=go_task_data.currency;0===e&&r>0&&go_sounds("store"),go_make_clickable(),jQuery(".go_stage_message").show("slow"),jQuery(".go_checks_and_buttons").show("slow"),jQuery("#go_button").one("click",function(e){task_stage_check_input(this)}),jQuery("#go_back_button").one("click",function(e){task_stage_check_input(this)}),jQuery("#go_bonus_button").one("click",function(e){go_update_bonus_loot(this)}),jQuery(".progress").closest(".go_checks_and_buttons").addClass("active")});