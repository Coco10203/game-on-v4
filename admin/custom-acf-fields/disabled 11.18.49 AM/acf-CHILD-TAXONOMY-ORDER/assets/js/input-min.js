!function($){function e(e){}void 0!==acf.add_action?(acf.add_action("ready_field/type=CHILD_TAXONOMY_ORDER","initialize_field"),acf.add_action("append_field/type=CHILD_TAXONOMY_ORDER","initialize_field"),function($){acf.fields.taxonomy=acf.field.extend({type:"taxonomy",$el:null,actions:{ready:"render",append:"render",remove:"remove"},events:{'click a[data-name="add"]':"add_term"},focus:function(){this.$el=this.$field.find(".acf-taxonomy-field"),this.o=acf.get_data(this.$el,{save:"",type:"",taxonomy:""}),this.o.key=this.$field.data("key")},render:function(){var e=this.$field.find("select");if(e.exists()){var t=acf.get_data(e);t=acf.parse_args(t,{pagination:!0,ajax_action:"acf/fields/taxonomy/query",key:this.o.key}),acf.select2.init(e,t)}},remove:function(){var e=this.$field.find("select");if(!e.exists())return!1;acf.select2.destroy(e)},add_term:function(e){var t=this;acf.open_popup({title:e.$el.attr("title")||e.$el.data("title"),loading:!0,height:220});var a=acf.prepare_for_ajax({action:"acf/fields/taxonomy/add_term",field_key:this.o.key});$.ajax({url:acf.get("ajaxurl"),data:a,type:"post",dataType:"html",success:function(e){t.add_term_confirm(e)}})},add_term_confirm:function(e){var t=this;acf.update_popup({content:e}),$('#acf-popup input[name="term_name"]').focus(),$("#acf-popup form").on("submit",function(e){e.preventDefault(),t.add_term_submit($(this))})},add_term_submit:function(e){var t=this,a=e.find(".acf-submit"),i=e.find('input[name="term_name"]'),n=e.find('select[name="term_parent"]');if(""===i.val())return i.focus(),!1;a.find("button").attr("disabled","disabled"),a.find(".acf-spinner").addClass("is-active");var d=acf.prepare_for_ajax({action:"acf/fields/taxonomy/add_term",field_key:this.o.key,term_name:i.val(),term_parent:n.exists()?n.val():0});$.ajax({url:acf.get("ajaxurl"),data:d,type:"post",dataType:"json",success:function(e){var n=acf.get_ajax_message(e);acf.is_ajax_success(e)&&(i.val(""),t.append_new_term(e.data)),n.text&&a.find("span").html(n.text)},complete:function(){a.find("button").removeAttr("disabled"),a.find(".acf-spinner").removeClass("is-active"),a.find("span").delay(1500).fadeOut(250,function(){$(this).html(""),$(this).show()}),i.focus()}})},append_new_term:function(e){var t={id:e.term_id,text:e.term_label};switch($('.acf-taxonomy-field[data-taxonomy="'+this.o.taxonomy+'"]').each(function(){var t=$(this).data("type");if("radio"==t||"checkbox"==t){var a=$(this).children('input[type="hidden"]'),i=$(this).find("ul:first"),n=a.attr("name");"checkbox"==t&&(n+="[]");var d=$(['<li data-id="'+e.term_id+'">',"<label>",'<input type="'+t+'" value="'+e.term_id+'" name="'+n+'" /> ',"<span>"+e.term_label+"</span>","</label>","</li>"].join(""));if(e.term_parent){var r=i.find('li[data-id="'+e.term_parent+'"]');i=r.children("ul"),i.exists()||(i=$('<ul class="children acf-bl"></ul>'),r.append(i))}i.append(d)}}),$("#acf-popup #term_parent").each(function(){var t=$('<option value="'+e.term_id+'">'+e.term_label+"</option>");e.term_parent?$(this).children('option[value="'+e.term_parent+'"]').after(t):$(this).append(t)}),this.o.type){case"select":var a=this.$el.children("select");acf.select2.add_value(a,e.term_id,e.term_label);break;case"multi_select":var a=this.$el.children("select");acf.select2.add_value(a,e.term_id,e.term_label);break;case"checkbox":case"radio":var i=this.$el.find(".categorychecklist-holder"),n=i.find('li[data-id="'+e.term_id+'"]'),d=i.get(0).scrollTop+(n.offset().top-i.offset().top);n.find("input").prop("checked",!0),i.animate({scrollTop:d},"250");break}}})}(jQuery)):$(document).on("acf/setup_fields",function(e,t){$(t).find('.field[data-field_type="CHILD_TAXONOMY_ORDER"]').each(function(){$(this)})})}(jQuery);